{
    "info": {
        "name": "API Feedbacks - Completa",
        "description": "Colección completa para probar la API de Feedbacks.\n\n## Setup\n1. Levantar la API: `docker compose up -d --build`\n2. Usar las variables `base_url` y `api_key` configuradas.\n\n## Flujo recomendado\n1. Health Check / Ready\n2. Crear varios Feedbacks\n3. Listar con filtros\n4. Obtener por ID\n5. Actualizar\n6. Probar escenarios de error",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "variable": [
        {
            "key": "base_url",
            "value": "http://localhost:8080",
            "type": "string"
        },
        {
            "key": "api_key",
            "value": "my-secret-api-key",
            "type": "string"
        },
        {
            "key": "feedback_id",
            "value": "",
            "type": "string"
        },
        {
            "key": "feedback_id_2",
            "value": "",
            "type": "string"
        }
    ],
    "item": [
        {
            "name": "01 - Health & Readiness",
            "item": [
                {
                    "name": "Health Check",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{base_url}}/health",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "health"
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 200', () => pm.response.to.have.status(200));",
                                    "pm.test('Status is ok', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.status).to.eql('ok');",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "Readiness Check",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{base_url}}/ready",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "ready"
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 200', () => pm.response.to.have.status(200));",
                                    "pm.test('Status is ready', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.status).to.eql('ready');",
                                    "});"
                                ]
                            }
                        }
                    ]
                }
            ]
        },
        {
            "name": "02 - Autenticación (Excepciones)",
            "item": [
                {
                    "name": "Sin API Key → 401",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 401', () => pm.response.to.have.status(401));",
                                    "pm.test('Error UNAUTHORIZED', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.success).to.be.false;",
                                    "pm.expect(body.error.code).to.eql('UNAUTHORIZED');",
                                    "pm.expect(body.error.message).to.eql('missing API key');",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "API Key Inválida → 401",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "X-API-Key",
                                "value": "wrong-api-key"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 401', () => pm.response.to.have.status(401));",
                                    "pm.test('Error UNAUTHORIZED', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.success).to.be.false;",
                                    "pm.expect(body.error.code).to.eql('UNAUTHORIZED');",
                                    "pm.expect(body.error.message).to.eql('invalid API key');",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "API Key vacía → 401",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "X-API-Key",
                                "value": ""
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 401', () => pm.response.to.have.status(401));",
                                    "pm.test('Error UNAUTHORIZED', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.success).to.be.false;",
                                    "pm.expect(body.error.code).to.eql('UNAUTHORIZED');",
                                    "});"
                                ]
                            }
                        }
                    ]
                }
            ]
        },
        {
            "name": "03 - Crear Feedback (Happy Path)",
            "item": [
                {
                    "name": "Crear Feedback tipo bug",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ]
                        },
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"user_id\": \"u-001\",\n    \"feedback_type\": \"bug\",\n    \"rating\": 2,\n    \"comment\": \"El botón de pago no responde en Safari\"\n}"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 201', () => pm.response.to.have.status(201));",
                                    "pm.test('Feedback creado correctamente', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.success).to.be.true;",
                                    "pm.expect(body.data.user_id).to.eql('u-001');",
                                    "pm.expect(body.data.feedback_type).to.eql('bug');",
                                    "pm.expect(body.data.rating).to.eql(2);",
                                    "pm.expect(body.data.feedback_id).to.match(/^f-\\d{4}$/);",
                                    "pm.expect(body.data.created_at).to.be.a('string');",
                                    "pm.expect(body.data.updated_at).to.be.a('string');",
                                    "pm.collectionVariables.set('feedback_id', body.data.feedback_id);",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "Crear Feedback tipo sugerencia",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ]
                        },
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"user_id\": \"u-002\",\n    \"feedback_type\": \"sugerencia\",\n    \"rating\": 4,\n    \"comment\": \"Sería útil poder exportar reportes a PDF\"\n}"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 201', () => pm.response.to.have.status(201));",
                                    "pm.test('Feedback creado correctamente', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.success).to.be.true;",
                                    "pm.expect(body.data.user_id).to.eql('u-002');",
                                    "pm.expect(body.data.feedback_type).to.eql('sugerencia');",
                                    "pm.expect(body.data.rating).to.eql(4);",
                                    "pm.expect(body.data.feedback_id).to.match(/^f-\\d{4}$/);",
                                    "pm.expect(body.data.created_at).to.be.a('string');",
                                    "pm.expect(body.data.updated_at).to.be.a('string');",
                                    "pm.collectionVariables.set('feedback_id_2', body.data.feedback_id);",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "Crear Feedback tipo elogio",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ]
                        },
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"user_id\": \"u-001\",\n    \"feedback_type\": \"elogio\",\n    \"rating\": 5,\n    \"comment\": \"Excelente experiencia, la plataforma es muy intuitiva\"\n}"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 201', () => pm.response.to.have.status(201));",
                                    "pm.test('Feedback creado correctamente', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.success).to.be.true;",
                                    "pm.expect(body.data.user_id).to.eql('u-001');",
                                    "pm.expect(body.data.feedback_type).to.eql('elogio');",
                                    "pm.expect(body.data.rating).to.eql(5);",
                                    "pm.expect(body.data.feedback_id).to.match(/^f-\\d{4}$/);",
                                    "pm.expect(body.data.created_at).to.be.a('string');",
                                    "pm.expect(body.data.updated_at).to.be.a('string');",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "Crear Feedback tipo duda",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ]
                        },
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"user_id\": \"u-003\",\n    \"feedback_type\": \"duda\",\n    \"rating\": 3,\n    \"comment\": \"¿Cómo puedo cambiar mi método de pago?\"\n}"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 201', () => pm.response.to.have.status(201));",
                                    "pm.test('Feedback creado correctamente', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.success).to.be.true;",
                                    "pm.expect(body.data.user_id).to.eql('u-003');",
                                    "pm.expect(body.data.feedback_type).to.eql('duda');",
                                    "pm.expect(body.data.rating).to.eql(3);",
                                    "pm.expect(body.data.feedback_id).to.match(/^f-\\d{4}$/);",
                                    "pm.expect(body.data.created_at).to.be.a('string');",
                                    "pm.expect(body.data.updated_at).to.be.a('string');",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "Crear Feedback tipo queja",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ]
                        },
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"user_id\": \"u-004\",\n    \"feedback_type\": \"queja\",\n    \"rating\": 1,\n    \"comment\": \"El tiempo de carga es inaceptable\"\n}"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 201', () => pm.response.to.have.status(201));",
                                    "pm.test('Feedback creado correctamente', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.success).to.be.true;",
                                    "pm.expect(body.data.user_id).to.eql('u-004');",
                                    "pm.expect(body.data.feedback_type).to.eql('queja');",
                                    "pm.expect(body.data.rating).to.eql(1);",
                                    "pm.expect(body.data.feedback_id).to.match(/^f-\\d{4}$/);",
                                    "pm.expect(body.data.created_at).to.be.a('string');",
                                    "pm.expect(body.data.updated_at).to.be.a('string');",
                                    "});"
                                ]
                            }
                        }
                    ]
                }
            ]
        },
        {
            "name": "04 - Crear Feedback (Excepciones)",
            "item": [
                {
                    "name": "Body vacío → 400",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ]
                        },
                        "body": {
                            "mode": "raw",
                            "raw": "{}"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 400', () => pm.response.to.have.status(400));",
                                    "pm.test('Errores de validación', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.success).to.be.false;",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "Sin user_id → 400",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ]
                        },
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"feedback_type\": \"bug\",\n    \"rating\": 3,\n    \"comment\": \"Falta el user_id\"\n}"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 400', () => pm.response.to.have.status(400));",
                                    "pm.test('Validation error user_id', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.error.code).to.eql('VALIDATION_ERROR');",
                                    "const fields = body.error.details.map(d => d.field);",
                                    "pm.expect(fields).to.include('user_id');",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "user_id formato inválido (usr-001) → 400",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ]
                        },
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"user_id\": \"usr-001\",\n    \"feedback_type\": \"bug\",\n    \"rating\": 3,\n    \"comment\": \"Formato incorrecto de user_id\"\n}"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 400', () => pm.response.to.have.status(400));",
                                    "pm.test('Validation error user_id format', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.error.code).to.eql('VALIDATION_ERROR');",
                                    "const fields = body.error.details.map(d => d.field);",
                                    "pm.expect(fields).to.include('user_id');",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "user_id formato inválido (texto libre) → 400",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ]
                        },
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"user_id\": \"john_doe\",\n    \"feedback_type\": \"bug\",\n    \"rating\": 3,\n    \"comment\": \"user_id no cumple u-###\"\n}"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 400', () => pm.response.to.have.status(400));",
                                    "pm.test('Validation error user_id', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.error.code).to.eql('VALIDATION_ERROR');",
                                    "const fields = body.error.details.map(d => d.field);",
                                    "pm.expect(fields).to.include('user_id');",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "feedback_type inválido → 400",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ]
                        },
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"user_id\": \"u-001\",\n    \"feedback_type\": \"invalid_type\",\n    \"rating\": 3,\n    \"comment\": \"Tipo inválido\"\n}"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 400', () => pm.response.to.have.status(400));",
                                    "pm.test('Validation error feedback_type', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.error.code).to.eql('VALIDATION_ERROR');",
                                    "const fields = body.error.details.map(d => d.field);",
                                    "pm.expect(fields).to.include('feedback_type');",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "feedback_type en inglés (suggestion) → 400",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ]
                        },
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"user_id\": \"u-001\",\n    \"feedback_type\": \"suggestion\",\n    \"rating\": 3,\n    \"comment\": \"Tipo en inglés no válido\"\n}"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 400', () => pm.response.to.have.status(400));",
                                    "pm.test('Validation error feedback_type', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.error.code).to.eql('VALIDATION_ERROR');",
                                    "const fields = body.error.details.map(d => d.field);",
                                    "pm.expect(fields).to.include('feedback_type');",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "Rating fuera de rango (0) → 400",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ]
                        },
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"user_id\": \"u-001\",\n    \"feedback_type\": \"bug\",\n    \"rating\": 0,\n    \"comment\": \"Rating menor a 1\"\n}"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 400', () => pm.response.to.have.status(400));",
                                    "pm.test('Validation error rating', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.error.code).to.eql('VALIDATION_ERROR');",
                                    "const fields = body.error.details.map(d => d.field);",
                                    "pm.expect(fields).to.include('rating');",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "Rating fuera de rango (6) → 400",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ]
                        },
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"user_id\": \"u-001\",\n    \"feedback_type\": \"bug\",\n    \"rating\": 6,\n    \"comment\": \"Rating mayor a 5\"\n}"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 400', () => pm.response.to.have.status(400));",
                                    "pm.test('Validation error rating', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.error.code).to.eql('VALIDATION_ERROR');",
                                    "const fields = body.error.details.map(d => d.field);",
                                    "pm.expect(fields).to.include('rating');",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "Rating negativo (-1) → 400",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ]
                        },
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"user_id\": \"u-001\",\n    \"feedback_type\": \"bug\",\n    \"rating\": -1,\n    \"comment\": \"Rating negativo\"\n}"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 400', () => pm.response.to.have.status(400));",
                                    "pm.test('Validation error rating', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.error.code).to.eql('VALIDATION_ERROR');",
                                    "const fields = body.error.details.map(d => d.field);",
                                    "pm.expect(fields).to.include('rating');",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "Comentario vacío → 400",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ]
                        },
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"user_id\": \"u-001\",\n    \"feedback_type\": \"bug\",\n    \"rating\": 3,\n    \"comment\": \"\"\n}"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 400', () => pm.response.to.have.status(400));",
                                    "pm.test('Validation error comment', () => {",
                                    "const body = pm.response.json();",
                                    "const fields = body.error.details.map(d => d.field);",
                                    "pm.expect(fields).to.include('comment');",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "Comentario solo espacios → 400",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ]
                        },
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"user_id\": \"u-001\",\n    \"feedback_type\": \"bug\",\n    \"rating\": 3,\n    \"comment\": \"   \"\n}"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 400', () => pm.response.to.have.status(400));",
                                    "pm.test('Validation error comment', () => {",
                                    "const body = pm.response.json();",
                                    "const fields = body.error.details.map(d => d.field);",
                                    "pm.expect(fields).to.include('comment');",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "JSON malformado → 400",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ]
                        },
                        "body": {
                            "mode": "raw",
                            "raw": "{ invalid json }"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 400', () => pm.response.to.have.status(400));",
                                    "pm.test('Error INVALID_JSON', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.error.code).to.eql('INVALID_JSON');",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "Múltiples errores de validación → 400",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ]
                        },
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"user_id\": \"\",\n    \"feedback_type\": \"nonexistent\",\n    \"rating\": 99,\n    \"comment\": \"\"\n}"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 400', () => pm.response.to.have.status(400));",
                                    "pm.test('Multiple validation errors', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.error.code).to.eql('VALIDATION_ERROR');",
                                    "pm.expect(body.error.details.length).to.be.greaterThan(1);",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "Comentario excede 2000 caracteres → 400",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ]
                        },
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"user_id\": \"u-001\",\n    \"feedback_type\": \"bug\",\n    \"rating\": 3,\n    \"comment\": \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\"\n}"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 400', () => pm.response.to.have.status(400));",
                                    "pm.test('Validation error comment length', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.error.code).to.eql('VALIDATION_ERROR');",
                                    "const fields = body.error.details.map(d => d.field);",
                                    "pm.expect(fields).to.include('comment');",
                                    "});"
                                ]
                            }
                        }
                    ]
                }
            ]
        },
        {
            "name": "05 - Obtener Feedback por ID",
            "item": [
                {
                    "name": "Obtener por ID (Happy Path)",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks/{{feedback_id}}",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks",
                                "{{feedback_id}}"
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 200', () => pm.response.to.have.status(200));",
                                    "pm.test('Feedback retornado', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.success).to.be.true;",
                                    "pm.expect(body.data.feedback_id).to.eql(pm.collectionVariables.get('feedback_id'));",
                                    "pm.expect(body.data.feedback_id).to.match(/^f-\\d{4}$/);",
                                    "pm.expect(body.data.user_id).to.match(/^u-\\d{3}$/);",
                                    "pm.expect(body.data).to.have.all.keys('feedback_id','user_id','feedback_type','rating','comment','created_at','updated_at');",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "ID inexistente → 404",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks/f-9999",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks",
                                "f-9999"
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 404', () => pm.response.to.have.status(404));",
                                    "pm.test('Error NOT_FOUND', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.success).to.be.false;",
                                    "pm.expect(body.error.code).to.eql('NOT_FOUND');",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "ID con formato inválido → 404",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks/abc-invalid",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks",
                                "abc-invalid"
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 404', () => pm.response.to.have.status(404));",
                                    "pm.test('Error NOT_FOUND', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.success).to.be.false;",
                                    "pm.expect(body.error.code).to.eql('NOT_FOUND');",
                                    "});"
                                ]
                            }
                        }
                    ]
                }
            ]
        },
        {
            "name": "06 - Actualizar Feedback (Happy Path)",
            "item": [
                {
                    "name": "Actualizar rating solamente",
                    "request": {
                        "method": "PATCH",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks/{{feedback_id}}",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks",
                                "{{feedback_id}}"
                            ]
                        },
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"rating\": 5\n}"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 200', () => pm.response.to.have.status(200));",
                                    "pm.test('Rating actualizado', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.data.rating).to.eql(5);",
                                    "pm.expect(body.data.feedback_id).to.eql(pm.collectionVariables.get('feedback_id'));",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "Actualizar comment solamente",
                    "request": {
                        "method": "PATCH",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks/{{feedback_id}}",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks",
                                "{{feedback_id}}"
                            ]
                        },
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"comment\": \"Problema resuelto, gracias\"\n}"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 200', () => pm.response.to.have.status(200));",
                                    "pm.test('Comment actualizado', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.data.comment).to.eql('Problema resuelto, gracias');",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "Actualizar feedback_type solamente",
                    "request": {
                        "method": "PATCH",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks/{{feedback_id}}",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks",
                                "{{feedback_id}}"
                            ]
                        },
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"feedback_type\": \"elogio\"\n}"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 200', () => pm.response.to.have.status(200));",
                                    "pm.test('Type actualizado a elogio', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.data.feedback_type).to.eql('elogio');",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "Actualizar múltiples campos",
                    "request": {
                        "method": "PATCH",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks/{{feedback_id}}",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks",
                                "{{feedback_id}}"
                            ]
                        },
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"feedback_type\": \"sugerencia\",\n    \"rating\": 4,\n    \"comment\": \"Actualización final\"\n}"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 200', () => pm.response.to.have.status(200));",
                                    "pm.test('Campos actualizados', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.data.rating).to.eql(4);",
                                    "pm.expect(body.data.comment).to.eql('Actualización final');",
                                    "pm.expect(body.data.feedback_type).to.eql('sugerencia');",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "Verificar updated_at cambia",
                    "request": {
                        "method": "PATCH",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks/{{feedback_id}}",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks",
                                "{{feedback_id}}"
                            ]
                        },
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"rating\": 3\n}"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 200', () => pm.response.to.have.status(200));",
                                    "pm.test('updated_at es reciente', () => {",
                                    "const body = pm.response.json();",
                                    "const updatedAt = new Date(body.data.updated_at);",
                                    "const now = new Date();",
                                    "const diffMs = now - updatedAt;",
                                    "pm.expect(diffMs).to.be.below(60000);",
                                    "});"
                                ]
                            }
                        }
                    ]
                }
            ]
        },
        {
            "name": "07 - Actualizar Feedback (Excepciones)",
            "item": [
                {
                    "name": "Body vacío (sin campos) → 400",
                    "request": {
                        "method": "PATCH",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks/{{feedback_id}}",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks",
                                "{{feedback_id}}"
                            ]
                        },
                        "body": {
                            "mode": "raw",
                            "raw": "{}"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 400', () => pm.response.to.have.status(400));",
                                    "pm.test('Error EMPTY_UPDATE', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.error.code).to.eql('EMPTY_UPDATE');",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "ID inexistente → 404",
                    "request": {
                        "method": "PATCH",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks/f-9999",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks",
                                "f-9999"
                            ]
                        },
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"rating\": 5\n}"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 404', () => pm.response.to.have.status(404));",
                                    "pm.test('Error NOT_FOUND', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.error.code).to.eql('NOT_FOUND');",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "Rating inválido en update → 400",
                    "request": {
                        "method": "PATCH",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks/{{feedback_id}}",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks",
                                "{{feedback_id}}"
                            ]
                        },
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"rating\": 10\n}"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 400', () => pm.response.to.have.status(400));",
                                    "pm.test('Validation error', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.error.code).to.eql('VALIDATION_ERROR');",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "feedback_type inválido en update → 400",
                    "request": {
                        "method": "PATCH",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks/{{feedback_id}}",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks",
                                "{{feedback_id}}"
                            ]
                        },
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"feedback_type\": \"invalid\"\n}"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 400', () => pm.response.to.have.status(400));",
                                    "pm.test('Validation error', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.error.code).to.eql('VALIDATION_ERROR');",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "Comment vacío en update → 400",
                    "request": {
                        "method": "PATCH",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks/{{feedback_id}}",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks",
                                "{{feedback_id}}"
                            ]
                        },
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"comment\": \"\"\n}"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 400', () => pm.response.to.have.status(400));",
                                    "pm.test('Validation error comment', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.error.code).to.eql('VALIDATION_ERROR');",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "JSON malformado en update → 400",
                    "request": {
                        "method": "PATCH",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks/{{feedback_id}}",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks",
                                "{{feedback_id}}"
                            ]
                        },
                        "body": {
                            "mode": "raw",
                            "raw": "not a json"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 400', () => pm.response.to.have.status(400));",
                                    "pm.test('Error INVALID_JSON', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.error.code).to.eql('INVALID_JSON');",
                                    "});"
                                ]
                            }
                        }
                    ]
                }
            ]
        },
        {
            "name": "08 - Listar Feedbacks con Filtros (Happy Path)",
            "item": [
                {
                    "name": "Listar todos (sin filtros)",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 200', () => pm.response.to.have.status(200));",
                                    "pm.test('Respuesta con paginación', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.success).to.be.true;",
                                    "pm.expect(body.data).to.be.an('array');",
                                    "pm.expect(body.meta).to.have.property('total');",
                                    "pm.expect(body.meta).to.have.property('limit');",
                                    "pm.expect(body.meta).to.have.property('offset');",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "Filtrar por user_id",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks?user_id=u-001",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ],
                            "query": [
                                {
                                    "key": "user_id",
                                    "value": "u-001"
                                }
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 200', () => pm.response.to.have.status(200));",
                                    "pm.test('Todos son del user_id', () => {",
                                    "const body = pm.response.json();",
                                    "body.data.forEach(f => pm.expect(f.user_id).to.eql('u-001'));",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "Filtrar por feedback_type",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks?feedback_type=bug",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ],
                            "query": [
                                {
                                    "key": "feedback_type",
                                    "value": "bug"
                                }
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 200', () => pm.response.to.have.status(200));",
                                    "pm.test('Todos son tipo bug', () => {",
                                    "const body = pm.response.json();",
                                    "body.data.forEach(f => pm.expect(f.feedback_type).to.eql('bug'));",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "Filtrar por feedback_type sugerencia",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks?feedback_type=sugerencia",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ],
                            "query": [
                                {
                                    "key": "feedback_type",
                                    "value": "sugerencia"
                                }
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 200', () => pm.response.to.have.status(200));",
                                    "pm.test('Todos son tipo sugerencia', () => {",
                                    "const body = pm.response.json();",
                                    "body.data.forEach(f => pm.expect(f.feedback_type).to.eql('sugerencia'));",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "Filtrar por rango de rating",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks?min_rating=3&max_rating=5",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ],
                            "query": [
                                {
                                    "key": "min_rating",
                                    "value": "3"
                                },
                                {
                                    "key": "max_rating",
                                    "value": "5"
                                }
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 200', () => pm.response.to.have.status(200));",
                                    "pm.test('Ratings en rango 3-5', () => {",
                                    "const body = pm.response.json();",
                                    "body.data.forEach(f => {",
                                    "pm.expect(f.rating).to.be.at.least(3);",
                                    "pm.expect(f.rating).to.be.at.most(5);",
                                    "});",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "Filtrar por rango de fechas",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks?created_from=2026-01-01T00:00:00Z&created_to=2026-12-31T23:59:59Z",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ],
                            "query": [
                                {
                                    "key": "created_from",
                                    "value": "2026-01-01T00:00:00Z"
                                },
                                {
                                    "key": "created_to",
                                    "value": "2026-12-31T23:59:59Z"
                                }
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 200', () => pm.response.to.have.status(200));",
                                    "pm.test('Respuesta exitosa', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.success).to.be.true;",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "Filtrar solo min_rating",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks?min_rating=4",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ],
                            "query": [
                                {
                                    "key": "min_rating",
                                    "value": "4"
                                }
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 200', () => pm.response.to.have.status(200));",
                                    "pm.test('Ratings >= 4', () => {",
                                    "const body = pm.response.json();",
                                    "body.data.forEach(f => pm.expect(f.rating).to.be.at.least(4));",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "Filtrar solo max_rating",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks?max_rating=2",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ],
                            "query": [
                                {
                                    "key": "max_rating",
                                    "value": "2"
                                }
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 200', () => pm.response.to.have.status(200));",
                                    "pm.test('Ratings <= 2', () => {",
                                    "const body = pm.response.json();",
                                    "body.data.forEach(f => pm.expect(f.rating).to.be.at.most(2));",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "Filtros combinados (user_id + type + rating)",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks?user_id=u-001&min_rating=1&max_rating=3&feedback_type=bug",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ],
                            "query": [
                                {
                                    "key": "user_id",
                                    "value": "u-001"
                                },
                                {
                                    "key": "min_rating",
                                    "value": "1"
                                },
                                {
                                    "key": "max_rating",
                                    "value": "3"
                                },
                                {
                                    "key": "feedback_type",
                                    "value": "bug"
                                }
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 200', () => pm.response.to.have.status(200));",
                                    "pm.test('Filtros combinados aplicados', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.success).to.be.true;",
                                    "body.data.forEach(f => {",
                                    "pm.expect(f.user_id).to.eql('u-001');",
                                    "pm.expect(f.feedback_type).to.eql('bug');",
                                    "pm.expect(f.rating).to.be.at.least(1);",
                                    "pm.expect(f.rating).to.be.at.most(3);",
                                    "});",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "Paginación con limit y offset",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks?limit=2&offset=0",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ],
                            "query": [
                                {
                                    "key": "limit",
                                    "value": "2"
                                },
                                {
                                    "key": "offset",
                                    "value": "0"
                                }
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 200', () => pm.response.to.have.status(200));",
                                    "pm.test('Paginación aplicada', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.meta.limit).to.eql(2);",
                                    "pm.expect(body.meta.offset).to.eql(0);",
                                    "pm.expect(body.data.length).to.be.at.most(2);",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "Paginación segunda página",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks?limit=2&offset=2",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ],
                            "query": [
                                {
                                    "key": "limit",
                                    "value": "2"
                                },
                                {
                                    "key": "offset",
                                    "value": "2"
                                }
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 200', () => pm.response.to.have.status(200));",
                                    "pm.test('Segunda página', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.meta.limit).to.eql(2);",
                                    "pm.expect(body.meta.offset).to.eql(2);",
                                    "});"
                                ]
                            }
                        }
                    ]
                }
            ]
        },
        {
            "name": "09 - Listar Feedbacks (Excepciones)",
            "item": [
                {
                    "name": "feedback_type inválido en filtro → 400",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks?feedback_type=invalid",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ],
                            "query": [
                                {
                                    "key": "feedback_type",
                                    "value": "invalid"
                                }
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 400', () => pm.response.to.have.status(400));",
                                    "pm.test('Error INVALID_FILTER', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.error.code).to.eql('INVALID_FILTER');",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "feedback_type en inglés en filtro → 400",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks?feedback_type=suggestion",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ],
                            "query": [
                                {
                                    "key": "feedback_type",
                                    "value": "suggestion"
                                }
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 400', () => pm.response.to.have.status(400));",
                                    "pm.test('Error INVALID_FILTER', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.error.code).to.eql('INVALID_FILTER');",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "min_rating no numérico → 400",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks?min_rating=abc",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ],
                            "query": [
                                {
                                    "key": "min_rating",
                                    "value": "abc"
                                }
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 400', () => pm.response.to.have.status(400));",
                                    "pm.test('Error INVALID_FILTER', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.error.code).to.eql('INVALID_FILTER');",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "max_rating fuera de rango → 400",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks?max_rating=10",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ],
                            "query": [
                                {
                                    "key": "max_rating",
                                    "value": "10"
                                }
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 400', () => pm.response.to.have.status(400));",
                                    "pm.test('Error INVALID_FILTER', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.error.code).to.eql('INVALID_FILTER');",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "min_rating fuera de rango (0) → 400",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks?min_rating=0",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ],
                            "query": [
                                {
                                    "key": "min_rating",
                                    "value": "0"
                                }
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 400', () => pm.response.to.have.status(400));",
                                    "pm.test('Error INVALID_FILTER', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.error.code).to.eql('INVALID_FILTER');",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "created_from formato inválido → 400",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks?created_from=2026-01-01",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ],
                            "query": [
                                {
                                    "key": "created_from",
                                    "value": "2026-01-01"
                                }
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 400', () => pm.response.to.have.status(400));",
                                    "pm.test('Error INVALID_FILTER', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.error.code).to.eql('INVALID_FILTER');",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "created_to formato inválido → 400",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks?created_to=not-a-date",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ],
                            "query": [
                                {
                                    "key": "created_to",
                                    "value": "not-a-date"
                                }
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 400', () => pm.response.to.have.status(400));",
                                    "pm.test('Error INVALID_FILTER', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.error.code).to.eql('INVALID_FILTER');",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "limit negativo → 400",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks?limit=-1",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ],
                            "query": [
                                {
                                    "key": "limit",
                                    "value": "-1"
                                }
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 400', () => pm.response.to.have.status(400));",
                                    "pm.test('Error INVALID_FILTER', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.error.code).to.eql('INVALID_FILTER');",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "limit no numérico → 400",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks?limit=abc",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ],
                            "query": [
                                {
                                    "key": "limit",
                                    "value": "abc"
                                }
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 400', () => pm.response.to.have.status(400));",
                                    "pm.test('Error INVALID_FILTER', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.error.code).to.eql('INVALID_FILTER');",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "offset negativo → 400",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks?offset=-5",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ],
                            "query": [
                                {
                                    "key": "offset",
                                    "value": "-5"
                                }
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 400', () => pm.response.to.have.status(400));",
                                    "pm.test('Error INVALID_FILTER', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.error.code).to.eql('INVALID_FILTER');",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "user_id sin resultados → 200 vacío",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks?user_id=u-999",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ],
                            "query": [
                                {
                                    "key": "user_id",
                                    "value": "u-999"
                                }
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 200', () => pm.response.to.have.status(200));",
                                    "pm.test('Array vacío', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.success).to.be.true;",
                                    "pm.expect(body.data).to.be.an('array').that.is.empty;",
                                    "pm.expect(body.meta.total).to.eql(0);",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "Fechas sin resultados → 200 vacío",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks?created_from=2020-01-01T00:00:00Z&created_to=2020-01-02T00:00:00Z",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks"
                            ],
                            "query": [
                                {
                                    "key": "created_from",
                                    "value": "2020-01-01T00:00:00Z"
                                },
                                {
                                    "key": "created_to",
                                    "value": "2020-01-02T00:00:00Z"
                                }
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 200', () => pm.response.to.have.status(200));",
                                    "pm.test('Array vacío', () => {",
                                    "const body = pm.response.json();",
                                    "pm.expect(body.success).to.be.true;",
                                    "pm.expect(body.data).to.be.an('array').that.is.empty;",
                                    "});"
                                ]
                            }
                        }
                    ]
                }
            ]
        },
        {
            "name": "10 - Rutas No Encontradas",
            "item": [
                {
                    "name": "Ruta inexistente → 404/405",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/nonexistent",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "nonexistent"
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 404 o 405', () => {",
                                    "pm.expect(pm.response.code).to.be.oneOf([404, 405]);",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "DELETE no soportado → 405",
                    "request": {
                        "method": "DELETE",
                        "header": [
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks/{{feedback_id}}",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks",
                                "{{feedback_id}}"
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 405', () => pm.response.to.have.status(405));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "PUT no soportado → 405",
                    "request": {
                        "method": "PUT",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "X-API-Key",
                                "value": "{{api_key}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/v1/feedbacks/{{feedback_id}}",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "v1",
                                "feedbacks",
                                "{{feedback_id}}"
                            ]
                        },
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"user_id\": \"u-001\",\n    \"feedback_type\": \"bug\",\n    \"rating\": 3,\n    \"comment\": \"PUT no soportado\"\n}"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status 405', () => pm.response.to.have.status(405));"
                                ]
                            }
                        }
                    ]
                }
            ]
        }
    ]
}
